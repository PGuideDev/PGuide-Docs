import{_ as c,c as C,a as s,d as k,b as h,e as a,w as e,r as d,o as D}from"./app-Dk7ccnrl.js";const y={},u={class:"hint-container note"},E={class:"hint-container important"};function m(F,i){const l=d("VPIcon"),p=d("VPLink"),r=d("CodeTabs"),g=d("Tabs"),o=d("RepoCard");return D(),C("div",null,[s("p",null,[i[2]||(i[2]=a("编写者：",-1)),h(p,{href:"/friends/persons/"},{default:e(()=>[h(l,{provider:"iconify",name:"noto:red-heart"}),i[0]||(i[0]=a("rand777",-1))]),_:1,__:[0]}),i[3]||(i[3]=a()),h(p,{href:"/friends/persons/"},{default:e(()=>[h(l,{provider:"iconify",name:"noto:red-heart"}),i[1]||(i[1]=a("dream520nb",-1))]),_:1,__:[1]})]),i[31]||(i[31]=s("div",{class:"hint-container tip"},[s("p",{class:"hint-container-title"},[a("本文已完成并校对，部分内容引用自 "),s("a",{href:"https://csdiy.wiki/",target:"_blank",rel:"noopener noreferrer"},"计算机自学指南"),a(" 与 "),s("a",{href:"https://help.mirrors.cernet.edu.cn/",target:"_blank",rel:"noopener noreferrer"},"MirrorZ 帮助文档")])],-1)),s("div",u,[i[5]||(i[5]=s("p",{class:"hint-container-title"},"前置知识",-1)),s("p",null,[h(p,{href:"/learning-notes/linux/commands/"},{default:e(()=>[h(l,{provider:"iconify",name:"arcticons:shell-terminal"}),i[4]||(i[4]=a("Linux命令",-1))]),_:1,__:[4]})])]),i[32]||(i[32]=k('<div class="hint-container warning"><p class="hint-container-title">注意</p><p>容器镜像请确保文件未被篡改，来源是否可信，谨慎将其部署至生产环境。</p></div><p>使用别人写好的软件/工具最大的障碍是什么——必然是配环境。配环境带来的折磨会极大地消解你对软件、编程本身的兴趣。虚拟机可以解决配环境的一部分问题，但它庞大笨重，且为了某个应用的环境配置好像也不值得模拟一个全新的操作系统。</p><p>Docker 的出现让环境配置变得（或许）不再折磨。简单来说 Docker 使用轻量级的“容器”（container）而不是整个操作系统去支持一个应用的配置。应用自身连同它的环境配置被打包为一个个 image 可以自由运行在不同平台的一个个 container 中，这极大地节省了所有人的时间成本。</p><h2 id="如何学习docker" tabindex="-1"><a class="header-anchor" href="#如何学习docker"><span>如何学习docker</span></a></h2><p><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">Docker 官方文档</a>当然是最好的初学教材，但最好的导师一定是你自己——尝试去使用 Docker 才能享受它带来的便利。Docker 在工业界发展迅猛并已经非常成熟，你可以下载它的桌面端并使用图形界面。</p><p>当然，如果你像我一样，是一个疯狂的造轮子爱好者，那不妨自己亲手写一个迷你 Docker 来加深理解。</p><p><a href="https://kodekloud.com/courses/docker-for-the-absolute-beginner/" target="_blank" rel="noopener noreferrer">KodeKloud Docker for the Absolute Beginner</a> 全面的介绍了 Docker 的基础功能，并且有大量的配套练习，同时提供免费的云环境来完成练习。其余的云相关的课程如 Kubernetes 需要付费，但个人强烈推荐：讲解非常仔细，适合从 0 开始的新手；有配套的 Kubernetes 的实验环境，不用被搭建环境劝退。</p><h2 id="安装docker-ce" tabindex="-1"><a class="header-anchor" href="#安装docker-ce"><span>安装Docker CE</span></a></h2>',8)),s("div",E,[i[9]||(i[9]=s("p",{class:"hint-container-title"},"docker拉取失败解决方案",-1)),s("p",null,[i[7]||(i[7]=a("配置daemon.json文件：参考 ",-1)),h(p,{href:"/csdiy/tools-must/magic/docker-speed/"},{default:e(()=>i[6]||(i[6]=[a("docker magic",-1)])),_:1,__:[6]}),i[8]||(i[8]=a(" 配置docker代理",-1))])]),i[33]||(i[33]=k(`<h3 id="自动安装" tabindex="-1"><a class="header-anchor" href="#自动安装"><span>自动安装</span></a></h3><p>Docker 提供了一个自动配置与安装的脚本，支持 Debian、RHEL、SUSE 系列及衍生系统的安装。请注意，Docker 官方<mark>不建议</mark>在生产环境使用此脚本安装 Docker CE。</p><p>以下内容假定</p><p>您为 root 用户，或有 sudo 权限，或知道 root 密码； 您系统上有 curl 或 wget</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> DOWNLOAD_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;https://mirrors.cernet.edu.cn/docker-ce&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 如您使用 curl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -fsSL</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> https://raw.githubusercontent.com/docker/docker-install/master/install.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -E</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> sh</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 如您使用 wget</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -O-</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> https://raw.githubusercontent.com/docker/docker-install/master/install.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -E</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> sh</span></span></code></pre></div><h3 id="debian-ubuntu-raspbian" tabindex="-1"><a class="header-anchor" href="#debian-ubuntu-raspbian"><span>Debian/Ubuntu/Raspbian</span></a></h3>`,6)),s("blockquote",null,[s("p",null,[h(l,{provider:"iconify",name:"devicon:debian"}),i[10]||(i[10]=a("Debian ",-1)),h(l,{provider:"iconify",name:"logos:ubuntu"}),i[11]||(i[11]=a("Ubuntu ",-1)),h(l,{provider:"iconify",name:"logos:raspberry-pi"}),i[12]||(i[12]=a("Raspberry Pi OS",-1))])]),i[34]||(i[34]=k(`<p>以下内容根据 <a href="https://docs.docker.com/engine/install/debian/" target="_blank" rel="noopener noreferrer">官方文档</a> 修改而来。</p><p>如果你过去安装过 docker，先删掉：</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker.io</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker-doc</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> podman-docker</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> containerd</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> runc</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">do</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> remove</span><span style="--shiki-light:#24292E;--shiki-dark:#9CDCFE;"> $pkg</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">done</span></span></code></pre></div><p>安装依赖</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> ca-certificates</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> curl</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> gnupg</span></span></code></pre></div><p>信任 Docker 的 GPG 公钥并添加仓库：</p>`,6)),h(r,{id:"76",data:[{id:"Debian.sh"},{id:"Ubuntu.sh"},{id:"Respbian.sh"}]},{title0:e(({value:n,isActive:t})=>[h(l,{provider:"iconify",name:"vscode-icons:file-type-shell"}),i[13]||(i[13]=s("span",null,"Debian.sh",-1))]),title1:e(({value:n,isActive:t})=>[h(l,{provider:"iconify",name:"vscode-icons:file-type-shell"}),i[14]||(i[14]=s("span",null,"Ubuntu.sh",-1))]),title2:e(({value:n,isActive:t})=>[h(l,{provider:"iconify",name:"vscode-icons:file-type-shell"}),i[15]||(i[15]=s("span",null,"Respbian.sh",-1))]),tab0:e(({value:n,isActive:t})=>i[16]||(i[16]=[s("div",{class:"language-shell","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#24292e","--shiki-dark":"#D4D4D4","--shiki-light-bg":"#fff","--shiki-dark-bg":"#1E1E1E"}},[s("pre",{class:"shiki shiki-themes github-light dark-plus vp-code"},[s("code",{class:"language-shell"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," install"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -m"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#B5CEA8"}}," 0755"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -d"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/keyrings")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"curl"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -fsSL"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," https://download.docker.com/linux/debian/gpg"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#D4D4D4"}}," |"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}}," sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," gpg"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," --dearmor"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -o"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/keyrings/docker.gpg")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," chmod"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," a+r"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/keyrings/docker.gpg")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#DCDCAA"}},"echo"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D7BA7D"}}," \\")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'"deb [arch=$('),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"dpkg"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," --print-architecture"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},") signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.cernet.edu.cn/docker-ce/linux/debian "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D7BA7D"}},"\\")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#D4D4D4"}},"$(. "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},"/etc/os-release"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#D4D4D4"}}," && "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#DCDCAA"}},"echo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},' "'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#9CDCFE"}},"$VERSION_CODENAME"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#D4D4D4"}},")"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'" stable"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#D4D4D4"}}," |"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D7BA7D"}}," \\")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," tee"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/sources.list.d/docker.list"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#D4D4D4"}}," >"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /dev/null")])])])],-1)])),tab1:e(({value:n,isActive:t})=>i[17]||(i[17]=[s("div",{class:"language-shell","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#24292e","--shiki-dark":"#D4D4D4","--shiki-light-bg":"#fff","--shiki-dark-bg":"#1E1E1E"}},[s("pre",{class:"shiki shiki-themes github-light dark-plus vp-code"},[s("code",{class:"language-shell"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," install"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -m"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#B5CEA8"}}," 0755"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -d"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/keyrings")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"curl"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -fsSL"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," https://download.docker.com/linux/ubuntu/gpg"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#D4D4D4"}}," |"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}}," sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," gpg"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," --dearmor"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -o"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/keyrings/docker.gpg")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," chmod"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," a+r"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/keyrings/docker.gpg")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#DCDCAA"}},"echo"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D7BA7D"}}," \\")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'  "deb [arch=$('),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"dpkg"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," --print-architecture"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},") signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.cernet.edu.cn/docker-ce/linux/ubuntu "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D7BA7D"}},"\\")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'  "'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#D4D4D4"}},"$("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#DCDCAA"}},"."),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/os-release"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#D4D4D4"}}," && "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#DCDCAA"}},"echo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},' "'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#9CDCFE"}},"$VERSION_CODENAME"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#D4D4D4"}},")"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'" stable"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#D4D4D4"}}," |"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D7BA7D"}}," \\")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"  sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," tee"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/sources.list.d/docker.list"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#D4D4D4"}}," >"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /dev/null")])])])],-1)])),tab2:e(({value:n,isActive:t})=>i[18]||(i[18]=[s("div",{class:"language-shell","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#24292e","--shiki-dark":"#D4D4D4","--shiki-light-bg":"#fff","--shiki-dark-bg":"#1E1E1E"}},[s("pre",{class:"shiki shiki-themes github-light dark-plus vp-code"},[s("code",{class:"language-shell"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," install"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -m"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#B5CEA8"}}," 0755"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -d"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/keyrings")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"curl"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -fsSL"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," https://download.docker.com/linux/raspbian/gpg"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#D4D4D4"}}," |"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}}," sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," gpg"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," --dearmor"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -o"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/keyrings/docker.gpg")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," chmod"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," a+r"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/keyrings/docker.gpg")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#DCDCAA"}},"echo"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D7BA7D"}}," \\")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'  "deb [arch=$('),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"dpkg"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," --print-architecture"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},") signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.cernet.edu.cn/docker-ce/linux/raspbian "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D7BA7D"}},"\\")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'  "'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#D4D4D4"}},"$("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#DCDCAA"}},"."),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/os-release"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#D4D4D4"}}," && "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#DCDCAA"}},"echo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},' "'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#9CDCFE"}},"$VERSION_CODENAME"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#D4D4D4"}},")"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},'" stable"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#D4D4D4"}}," |"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D7BA7D"}}," \\")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"  sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," tee"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/apt/sources.list.d/docker.list"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#D4D4D4"}}," >"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /dev/null")])])])],-1)])),_:1}),i[35]||(i[35]=s("h3",{id:"fedora",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#fedora"},[s("span",null,"Fedora")])],-1)),s("blockquote",null,[s("p",null,[h(l,{provider:"iconify",name:"devicon:fedora"}),i[19]||(i[19]=a(" Fedora",-1))])]),i[36]||(i[36]=k(`<p>以下内容根据 <a href="https://docs.docker.com/engine/install/fedora/" target="_blank" rel="noopener noreferrer">官方文档</a> 修改而来。</p><p>如果你之前安装过 docker，请先删掉</p><div class="language-shell has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="shell" style="--vp-collapsed-lines:10;--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> dnf</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-client</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-client-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-common</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-latest-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-selinux</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-engine-selinux</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-engine</span></span></code></pre><div class="collapsed-lines"></div></div><p>安装依赖，下载 repo 文件，并把软件仓库地址替换为镜像站：</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> dnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> dnf-plugins-core</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> dnf-3</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> config-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> --add-repo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> https://download.docker.com/linux/fedora/docker-ce.repo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &#39;s+https://download.docker.com+https://mirrors.cernet.edu.cn/docker-ce+&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> /etc/yum.repos.d/docker-ce.repo</span></span></code></pre></div><p>最后安装：</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> dnf</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker-ce</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker-ce-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> containerd.io</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker-buildx-plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker-compose-plugin</span></span></code></pre></div><h3 id="centos-rhel" tabindex="-1"><a class="header-anchor" href="#centos-rhel"><span>CentOS/RHEL</span></a></h3><p>以下内容根据 <a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">官方文档</a> 修改而来。</p>`,9)),s("blockquote",null,[s("p",null,[h(l,{provider:"iconify",name:"devicon:centos"}),i[20]||(i[20]=a("CentOS ",-1)),h(l,{provider:"iconify",name:"devicon:rockylinux"}),i[21]||(i[21]=a(" RockyLinux ",-1)),h(l,{provider:"iconify",name:"devicon:almalinux"}),i[22]||(i[22]=a(" AlmaLinux",-1))])]),i[37]||(i[37]=k(`<p>如果你之前安装过 docker，请先删掉</p><div class="language-shell has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="shell" style="--vp-collapsed-lines:10;--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> dnf</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-client</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-client-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-common</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-latest-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-selinux</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-engine-selinux</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">                  docker-engine</span></span></code></pre><div class="collapsed-lines"></div></div><p>安装依赖，下载 repo 文件，并把软件仓库地址替换为CERNET联合镜像站：</p>`,3)),h(g,{id:"132",data:[{id:'<VPIcon provider="iconify" name="devicon:centos" />CentOS'},{id:'<VPIcon provider="iconify" name="devicon:rockylinux" />RockyLinux & <VPIcon provider="iconify" name="devicon:almalinux" />AlmaLinux'}]},{title0:e(({value:n,isActive:t})=>[h(l,{provider:"iconify",name:"devicon:centos"}),i[23]||(i[23]=a("CentOS",-1))]),title1:e(({value:n,isActive:t})=>[h(l,{provider:"iconify",name:"devicon:rockylinux"}),i[24]||(i[24]=a("RockyLinux & ",-1)),h(l,{provider:"iconify",name:"devicon:almalinux"}),i[25]||(i[25]=a("AlmaLinux",-1))]),tab0:e(({value:n,isActive:t})=>i[26]||(i[26]=[s("div",{class:"language-shell","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#24292e","--shiki-dark":"#D4D4D4","--shiki-light-bg":"#fff","--shiki-dark-bg":"#1E1E1E"}},[s("pre",{class:"shiki shiki-themes github-light dark-plus vp-code"},[s("code",{class:"language-shell"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},"  yum"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," install"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -y"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," yum-utils")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"yum-config-manager"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," --add-repo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," https://download.docker.com/linux/centos/docker-ce.repo")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," sed"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -i"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," 's+https://download.docker.com+https://mirrors.cernet.edu.cn/docker-ce+'"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/yum.repos.d/docker-ce.repo")])])])],-1)])),tab1:e(({value:n,isActive:t})=>i[27]||(i[27]=[s("div",{class:"language-shell","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#24292e","--shiki-dark":"#D4D4D4","--shiki-light-bg":"#fff","--shiki-dark-bg":"#1E1E1E"}},[s("pre",{class:"shiki shiki-themes github-light dark-plus vp-code"},[s("code",{class:"language-shell"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}},"  yum"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," install"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -y"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," yum-utils")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"yum-config-manager"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," --add-repo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," https://download.docker.com/linux/rhel/docker-ce.repo")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," sed"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#569CD6"}}," -i"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," 's+https://download.docker.com+https://mirrors.cernet.edu.cn/docker-ce+'"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," /etc/yum.repos.d/docker-ce.repo")])])])],-1),s("p",null,"最后安装：",-1),s("div",{class:"language-shell","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#24292e","--shiki-dark":"#D4D4D4","--shiki-light-bg":"#fff","--shiki-dark-bg":"#1E1E1E"}},[s("pre",{class:"shiki shiki-themes github-light dark-plus vp-code"},[s("code",{class:"language-shell"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#DCDCAA"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," yum"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," docker-ce"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," docker-ce-cli"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," containerd.io"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," docker-buildx-plugin"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#CE9178"}}," docker-compose-plugin")])])])],-1)])),_:1}),i[38]||(i[38]=s("h3",{id:"openmediavault",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#openmediavault"},[s("span",null,"OpenMediaVault")])],-1)),s("blockquote",null,[s("p",null,[h(l,{provider:"iconify",name:"simple-icons:openmediavault"}),i[28]||(i[28]=a(" OpenMediaVault",-1))])]),i[39]||(i[39]=k(`<p>Open Media Vault 是一款基于 Debian 的 NAS 操作系统。</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">omv-env</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> OMV_DOCKER_APT_REPOSITORY_URL</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;https://mirrors.cernet.edu.cn/docker-ce/linux/debian&quot;</span></span></code></pre></div><h2 id="迁移docker数据" tabindex="-1"><a class="header-anchor" href="#迁移docker数据"><span>迁移Docker数据</span></a></h2><h3 id="备份原数据" tabindex="-1"><a class="header-anchor" href="#备份原数据"><span>备份原数据</span></a></h3><p>首先，停止 Docker 服务，以确保在修改配置时不会发生数据损坏。</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker</span></span></code></pre></div><blockquote><p>假设迁移到 <code>/opt/docker-images</code> 中，则需要先备份，创建文件夹并给予权限</p></blockquote><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> /opt/docker-images</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -R</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;"> 755</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> /opt/docker-images</span></span></code></pre></div><p>使用rsync协议同步复制原docker数据卷</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> rsync</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -aP</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> /var/lib/docker/</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> /opt/docker-images/</span></span></code></pre></div><p>删除旧数据（可选）</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> /var/lib/docker</span></span></code></pre></div><h3 id="配置daemon-json" tabindex="-1"><a class="header-anchor" href="#配置daemon-json"><span>配置daemon.json</span></a></h3><p>在 Linux 系统上，Docker 的配置文件通常位于 <code>/etc/docker/daemon.json</code> 。如果该文件不存在，可以手动创建。</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> nano</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> /etc/docker/daemon.json</span></span></code></pre></div><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus has-diff vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">{</span></span>
<span class="line diff add"><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">    &quot;data-root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;/opt/docker-images&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">, </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;">    &quot;registry-mirrors&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">        &quot;https://docker.1panel.live&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">        &quot;https://image.cloudlayer.icu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">        &quot;https://dockerpull.cn&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">}</span></span></code></pre></div><p>Ctrl + X 保存</p><h3 id="重启docker" tabindex="-1"><a class="header-anchor" href="#重启docker"><span>重启docker</span></a></h3><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> docker</span></span></code></pre></div><h3 id="验证配置" tabindex="-1"><a class="header-anchor" href="#验证配置"><span>验证配置</span></a></h3><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> info</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;Docker Root Dir&quot;</span></span></code></pre></div><p>输出结果应该为 <code>Docker Root Dir: /opt/docker-images</code></p><h2 id="容器使用" tabindex="-1"><a class="header-anchor" href="#容器使用"><span>容器使用</span></a></h2>`,23)),s("p",null,[i[30]||(i[30]=a("编写者：",-1)),h(p,{href:"/friends/persons/"},{default:e(()=>[h(l,{provider:"iconify",name:"noto:red-heart"}),i[29]||(i[29]=a("dreamnb520",-1))]),_:1,__:[29]})]),i[40]||(i[40]=k('<p>作为一名爱好者，docker对于我们来讲更多的作用是使用他人制作的容器。</p><h3 id="在docker上部署tapnet" tabindex="-1"><a class="header-anchor" href="#在docker上部署tapnet"><span>在docker上部署tapnet</span></a></h3><h4 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h4><p>TapNet（Temporal Attention Propagation Network）是一种深度学习模型，旨在解决时序数据和动态图建模中的问题。它结合了图神经网络（GNN）和注意力机制，用于在动态图和时序数据中捕捉复杂的依赖关系。TapNet特别适用于那些涉及时间依赖性和图结构的信息传播问题，广泛应用于如交通预测、金融市场分析、社交网络分析等领域。</p><h4 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h4>',5)),h(o,{repo:"google-deepmind/tapnet"}),i[41]||(i[41]=k(`<div class="vp-steps"><ol><li><p>克隆储存库:</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> https://github.com/deepmind/tapnet.git</span></span></code></pre></div></li><li><p>配置 python 库</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#DCDCAA;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> tapnet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> tensorflow</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> https://mirrors.aliyun.com/pypi/simple/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> tensorflow_datasets</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> https://mirrors.aliyun.com/pypi/simple/</span></span></code></pre></div></li><li><p>检查点下载</p><p><a href="https://storage.googleapis.com/dm-tapnet/causal_tapir_checkpoint.npy" target="_blank" rel="noopener noreferrer">检查点下载链接</a></p></li></ol></div><h4 id="测试" tabindex="-1"><a class="header-anchor" href="#测试"><span>测试</span></a></h4><div class="language-python" data-highlighter="shiki" data-ext="python" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">python3 tapnet\\</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#F44747;--shiki-dark-font-style:inherit;">live_demo.py</span></span></code></pre></div><h4 id="拉取cuda的docker镜像" tabindex="-1"><a class="header-anchor" href="#拉取cuda的docker镜像"><span>拉取cuda的docker镜像</span></a></h4><p>这里我选择的cuda版本为cuda12.1(注：下面写错了，应该是121)</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> nvidia/cuda:12.1.0-cudnn8-devel-ubuntu22.04</span></span></code></pre></div><p>检查容器</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">nvcc</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> --version</span></span></code></pre></div><p>结果:</p><div class="language-" data-highlighter="shiki" data-ext="" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-"><span class="line"><span>nvcc: NVIDIA (R) Cuda compiler driver</span></span>
<span class="line"><span>Copyright (c) 2005-2022 NVIDIA Corporation</span></span>
<span class="line"><span>Built on Wed_Sep_21_10:33:58_PDT_2022</span></span>
<span class="line"><span>Cuda compilation tools, release 11.8, V11.8.89</span></span>
<span class="line"><span>Build cuda_11.8.r11.8/compiler.31833905_0</span></span></code></pre></div><p>配置环境</p><div class="language-shell has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="shell" style="--vp-collapsed-lines:10;--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 更新</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> update</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 下载</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> python3.11</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 检查是否安装成功ython3.11 --version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 安装wget</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> wget</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 下载pip安装包</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> https://bootstrap.pypa.io/get-pip.py</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">python3.11</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> get-pip.py</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 检查是否安装成功</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">python3.11</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> pip</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> --version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#DCDCAA;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> /home/tapnet</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 安装第三方库</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">python3.11</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> .</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 安装 cuda 版本 jax</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">python3.11</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;jax[cuda118]&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;"># 安装其他库</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">python3.11</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> tensorflow</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> https://pypi.tuna.tsinghua.edu.cn/simple</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">python3.11</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> tensorflow-datasets</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> https://pypi.tuna.tsinghua.edu.cn/simple</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">python3.11</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> websockets</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> https://pypi.tuna.tsinghua.edu.cn/simple</span></span></code></pre><div class="collapsed-lines"></div></div><p>发布docker</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;cuda118的镜像&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> 78bd1a17252aeeaa733fe9ce43802b5472b954d7cd418ccee7521e874ab4ed78</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> tapnet:cuda118</span></span></code></pre></div><p>创建一个容器进行检查</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> /f/work/bingRun/docker-tapnet:/home/tapnet</span><span style="--shiki-light:#005CC5;--shiki-dark:#569CD6;"> --gpus</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> all</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> tapnet:cuda118</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> /bin/bash</span></span></code></pre></div><p>编写python程序测试容器是否可以使用gpu</p><div class="language-python has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:10;--shiki-light:#24292e;--shiki-dark:#D4D4D4;--shiki-light-bg:#fff;--shiki-dark-bg:#1E1E1E;"><pre class="shiki shiki-themes github-light dark-plus vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> jax</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> jax.numpy </span><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> jnp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#569CD6;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCDCAA;"> matrix_multiply_on_gpu</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">():</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    # 创建两个随机矩阵</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    key </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> jax.random.PRNGKey(</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    a </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> jax.random.normal(key, (</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    b </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> jax.random.normal(key, (</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    # 指定在 CUDA 设备上计算</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    device </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> jax.devices(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;gpu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#B5CEA8;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    # 将数据传输到 GPU 上</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    a_gpu </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> jax.device_put(a, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">device)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    b_gpu </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> jax.device_put(b, </span><span style="--shiki-light:#E36209;--shiki-dark:#9CDCFE;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">device)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    # 在 GPU 上执行矩阵乘法</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    c_gpu </span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;"> jnp.dot(a_gpu, b_gpu)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A9955;">    # 打印计算结果</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#DCDCAA;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;Matrix a:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">, a)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#DCDCAA;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;Matrix b:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">, b)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#DCDCAA;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;Result of matrix multiplication on GPU:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D7BA7D;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">, c_gpu)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C586C0;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#9CDCFE;"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#D4D4D4;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#CE9178;"> &quot;__main__&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#D4D4D4;">    matrix_multiply_on_gpu()</span></span></code></pre><div class="collapsed-lines"></div></div>`,18))])}const f=c(y,[["render",m]]),b=JSON.parse('{"path":"/csdiy/tools-must/docker/","title":"Docker","lang":"zh-CN","frontmatter":{"title":"Docker","createTime":"2025/03/18 02:53:00","permalink":"/csdiy/tools-must/docker/","icon":"catppuccin:docker-compose","description":"编写者： 本文已完成并校对，部分内容引用自 计算机自学指南 与 MirrorZ 帮助文档 前置知识 注意 容器镜像请确保文件未被篡改，来源是否可信，谨慎将其部署至生产环境。 使用别人写好的软件/工具最大的障碍是什么——必然是配环境。配环境带来的折磨会极大地消解你对软件、编程本身的兴趣。虚拟机可以解决配环境的一部分问题，但它庞大笨重，且为了某个应用的环境...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-09T23:04:13.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://docs.pguide.dev/csdiy/tools-must/docker/"}],["meta",{"property":"og:site_name","content":"PGuide Docs"}],["meta",{"property":"og:title","content":"Docker"}],["meta",{"property":"og:description","content":"编写者： 本文已完成并校对，部分内容引用自 计算机自学指南 与 MirrorZ 帮助文档 前置知识 注意 容器镜像请确保文件未被篡改，来源是否可信，谨慎将其部署至生产环境。 使用别人写好的软件/工具最大的障碍是什么——必然是配环境。配环境带来的折磨会极大地消解你对软件、编程本身的兴趣。虚拟机可以解决配环境的一部分问题，但它庞大笨重，且为了某个应用的环境..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-09T23:04:13.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-09T23:04:13.000Z"}]]},"readingTime":{"minutes":6.8,"words":2039},"git":{"createdTime":1742239031000,"updatedTime":1754780653000,"contributors":[{"name":"rand777gg","username":"rand777gg","email":"losmosga@foxmail.com","commits":11,"avatar":"https://avatars.githubusercontent.com/rand777gg?v=4","url":"https://github.com/rand777gg"},{"name":"dream520nb","username":"dream520nb","email":"2082181572@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/dream520nb?v=4","url":"https://github.com/dream520nb"}],"changelog":[{"hash":"bdf2455124b9cff6b5f45134c297e89f5aa70966","time":1754780653000,"email":"rand777@pguide.studio","author":"rand777gg","message":"docs: update all site structure"},{"hash":"19cda05b13ce55dafe0393ee6a0fd82be08343a5","time":1749572816000,"email":"losmosga@foxmail.com","author":"rand777gg","message":"fix: update links in Docker documentation for clarity"},{"hash":"6612afd822068153b6ce850caecc1c59cdc2e341","time":1748294065000,"email":"losmosga@foxmail.com","author":"rand777gg","message":"refactor: update icon syntax for improved clarity in multiple documents"},{"hash":"c9492bc8f55eb023fb98797d45d70815ab635f2e","time":1748189182000,"email":"losmosga@foxmail.com","author":"rand777gg","message":"docs: enhance 5.Docker.md with formatting improvements and additional details"},{"hash":"3d0b9279865fe21ec7e556dbccfb76eaa61807a1","time":1747977756000,"email":"2082181572@qq.com","author":"dream520nb","message":"docker更改"},{"hash":"85bafc79d5b370fd3c808351b08f2e6d8a6c2811","time":1745672891000,"email":"losmosga@foxmail.com","author":"rand777gg","message":"docs: improve docs"},{"hash":"1bdc76663b909164b6cfed55a44463221f6079c0","time":1745509833000,"email":"losmosga@foxmail.com","author":"rand777gg","message":"docs: improve docs"},{"hash":"ebcdf43ee8b9a1b9409187cf806804fbf1e25678","time":1745503768000,"email":"losmosga@foxmail.com","author":"rand777gg","message":"docs: improve docs"},{"hash":"70f5148b24496e56d10a6d2600b9ccbc469b2650","time":1745481690000,"email":"losmosga@foxmail.com","author":"rand777gg","message":"docs: improve docs"},{"hash":"86217aa0a1466e464b605e816e04bda28a9b6620","time":1745439803000,"email":"losmosga@foxmail.com","author":"rand777gg","message":"docs: improve docs"}]},"autoDesc":true,"filePathRelative":"notes/CS-DIY/1.必学工具/5.Docker.md","headers":[]}');export{f as comp,b as data};
